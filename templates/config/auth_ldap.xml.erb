<useSecurity>true</useSecurity>
<securityRealm class="hudson.security.LDAPSecurityRealm" plugin="ldap">
  <server><%= scope.lookupvar('icinga_build::config_auth_ldap_server') -%></server>
	<rootDN><%= scope.lookupvar('icinga_build::config_auth_ldap_rootdn') -%></rootDN>
  <inhibitInferRootDN><%= scope.lookupvar('icinga_build::config_auth_ldap_noinferrootdn') -%></inhibitInferRootDN>
  <userSearchBase><%= scope.lookupvar('icinga_build::config_auth_ldap_usersearchbase') -%></userSearchBase>
  <userSearch><%= scope.lookupvar('icinga_build::config_auth_ldap_usersearch') -%></userSearch>
  <groupSearchBase><%= scope.lookupvar('icinga_build::config_auth_ldap_groupseachbase') -%></groupSearchBase>
<% if scope.lookupvar('icinga_build::config_auth_ldap_filter') -%>
  <groupMembershipStrategy class="jenkins.security.plugins.ldap.FromGroupSearchLDAPGroupMembershipStrategy">
    <filter><%= scope.lookupvar('icinga_build::ldap_rootDN') %></filter>
  </groupMembershipStrategy>
<% end -%>
  <managerDN><%= scope.lookupvar('icinga_build::config_auth_ldap_ldap_managerdn') -%></managerDN>
  <managerPasswordSecret><%= scope.lookupvar('icinga_build::config_auth_ldap_managerpassword') -%></managerPasswordSecret>
  <disableMailAddressResolver><%= scope.lookupvar('icinga_build::config_auth_ldap_disablemailresolver') -%></disableMailAddressResolver>
  <displayNameAttributeName><%= scope.lookupvar('icinga_build::config_auth_ldap_displaynameattr') -%></displayNameAttributeName>
  <mailAddressAttributeName><%= scope.lookupvar('icinga_build::config_auth_ldap_displayaddressattr') -%></mailAddressAttributeName>
  <userIdStrategy class="jenkins.model.IdStrategy$CaseInsensitive"/>
  <groupIdStrategy class="jenkins.model.IdStrategy$CaseInsensitive"/>
</securityRealm>
